
使用的无线模块为E32-433T20D.

```
E32-433T20D 是一款基于 SX1278 芯片的 LoRa 无线模块，工作在 433MHz 频段，最大输出功率为 20dBm（约100mW），常用于远距离、低功耗的无线通信应用，如工业控制、农业监测、智能家居、远程抄表等。
```

引脚：

```
引脚,名称,功能说明
1,M0,模式选择位 0
2,M1,模式选择位 1
3,RXD,UART 接收（接MCU的TX）
4,TXD,UART 发送（接MCU的RX）
5,AUX,状态指示（模块忙/空闲，输出高电平表示空闲）
6,VCC,电源（3.3V ~ 5.5V）
7,GND,地
```

让 M0=M1=0，使用正常模式，这样只需要连接3、4两个引脚到芯片，RXD到17，TXD到16。

发送端代码(只发送)：

```c
#include <HardwareSerial.h>
#include <BluetoothSerial.h>

// 创建蓝牙串口对象
BluetoothSerial SerialBT;

// 定义串口（使用 UART2）
#define E32_RX 16
#define E32_TX 17

HardwareSerial LoRaSerial(2);  // 使用 UART2

void SerialAuto(String s) {
  Serial.println(s);
  SerialBT.println(s);
}

// 可选：监控 AUX 状态（判断模块是否空闲）
#define E32_AUX 27

void setup() {
  Serial.begin(115200);
  
  if (!SerialBT.begin("ESP32_BT1")) {
    Serial.println("蓝牙启动失败！");
  } else {
    Serial.println("蓝牙已启动，等待连接...");
  }

  // 初始化 LoRa 串口（与 E32 通信）
  LoRaSerial.begin(9600, SERIAL_8N1, E32_RX, E32_TX);  // 波特率需与 E32 一致

  // 如果使用 AUX 引脚检测状态
  pinMode(E32_AUX, INPUT);

  delay(500);
  SerialAuto("E32-433T20D 已启动（M0/M1 已接地，正常模式）");
}

void loop() {
  // ==== 发送数据 ====
  LoRaSerial.println("A1A2");
  SerialAuto("已发送: miniD1 message");

  // ==== 接收来自对端 E32 的数据 ====
  // if (LoRaSerial.available()) {
  //   String received = LoRaSerial.readString();
  //   SerialAuto("收到 LoRa 数据: ");
  //   SerialAuto(received);
  // }

  // ==== 可选：检测 AUX 是否空闲 ====
  if (digitalRead(E32_AUX) == LOW) {
    SerialAuto("【警告】E32 正在忙（发射/接收中）");
  }

  delay(3000);  // 每 3 秒发送一次
}
```

接收端代码(只接收)：

```c
#include <HardwareSerial.h>
#include <BluetoothSerial.h>

// 创建蓝牙串口对象
BluetoothSerial SerialBT;

// 定义串口（使用 UART2）
#define E32_RX 16
#define E32_TX 17

HardwareSerial LoRaSerial(2);  // 使用 UART2

void SerialAuto(String s) {
  Serial.println(s);
  SerialBT.println(s);
}

// 可选：监控 AUX 状态（判断模块是否空闲）
#define E32_AUX 27

void setup() {
  Serial.begin(115200);
  
  if (!SerialBT.begin("ESP32_BT2")) {
    Serial.println("蓝牙启动失败！");
  } else {
    Serial.println("蓝牙已启动，等待连接...");
  }

  // 初始化 LoRa 串口（与 E32 通信）
  LoRaSerial.begin(9600, SERIAL_8N1, E32_RX, E32_TX);  // 波特率需与 E32 一致

  // 如果使用 AUX 引脚检测状态
  pinMode(E32_AUX, INPUT);

  delay(500);
  SerialAuto("E32-433T20D 已启动（M0/M1 已接地，正常模式）");
}

void loop() {
  // ==== 接收来自对端 E32 的数据 ====
  bool hasData = LoRaSerial.available();
  SerialAuto("收到 LoRa 数据: ");
  if (hasData) {
    String received = LoRaSerial.readString();
    SerialAuto("收到 LoRa 数据: ");
    SerialAuto(received);
  }

  // ==== 可选：检测 AUX 是否空闲 ====
  if (digitalRead(E32_AUX) == LOW) {
    SerialAuto("【警告】E32 正在忙（发射/接收中）");
  }

  delay(3000);  // 每 3 秒发送一次
}
```






